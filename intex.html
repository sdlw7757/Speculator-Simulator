<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç‚’è´§æ¨¡æ‹Ÿå™¨</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        }
        body {
            background-color: #f5f5f5;
        }
        .app-container {
            max-width: 420px;
            margin: 0 auto;
            background-color: #fff;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            position: relative;
        }
        .status-bar {
            background-color: #1677ff;
            color: white;
            padding: 20px 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .status-left {
            font-size: 18px;
            font-weight: 500;
        }
        .status-right {
            text-align: right;
            font-size: 16px;
        }
        .target-tip {
            background-color: #e6f7ff;
            color: #1890ff;
            padding: 6px 16px;
            font-size: 14px;
            text-align: center;
            border-bottom: 1px solid #91d5ff;
        }
        /* å¤§äº‹ä»¶æç¤ºæ¡æ ·å¼ */
        .event-tip {
            background-color: #fff2e8;
            color: #d4380d;
            padding: 8px 16px;
            font-size: 14px;
            border-left: 4px solid #ff4d4f;
            display: none;
        }
        .tabs {
            display: flex;
            border-bottom: 1px solid #e8e8e8;
        }
        .tab {
            flex: 1;
            text-align: center;
            padding: 12px 0;
            font-size: 16px;
            color: #666;
            background-color: #fafafa;
            cursor: pointer;
        }
        .tab.active {
            color: #1677ff;
            background-color: #fff;
            border-bottom: 2px solid #1677ff;
        }
        .content {
            flex: 1;
            padding: 16px;
        }
        .goods-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        .goods-item {
            background-color: #fff;
            border: 1px solid #e8e8e8;
            border-radius: 8px;
            padding: 16px;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        .goods-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .goods-name {
            font-size: 20px;
            font-weight: 500;
        }
        .goods-price {
            font-size: 18px;
            color: #333;
        }
        .goods-change-up {
            font-size: 16px;
            color: #ff4d4f;
        }
        .goods-change-down {
            font-size: 16px;
            color: #52c41a;
        }
        .goods-change-zero {
            font-size: 16px;
            color: #666;
        }
        .goods-action {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .goods-quantity {
            width: 60px;
            height: 40px;
            border: 1px solid #d9d9d9;
            border-radius: 4px;
            text-align: center;
            font-size: 16px;
        }
        .btn-buy {
            flex: 1;
            height: 40px;
            background-color: #1677ff;
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 16px;
            cursor: pointer;
        }
        .btn-next-month {
            background-color: #52c41a;
            color: white;
            border: none;
            padding: 16px;
            font-size: 18px;
            font-weight: 500;
            cursor: pointer;
        }
        .btn-next-month:disabled {
            background-color: #95de64;
            cursor: not-allowed;
        }
        .warehouse-content {
            display: none;
        }
        /* é€šå…³/ç ´äº§é®ç½©å±‚ */
        .result-mask {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.85);
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 999;
            padding: 20px;
        }
        .result-card {
            background-color: #fff;
            border-radius: 12px;
            padding: 30px 20px;
            width: 100%;
            max-width: 350px;
            text-align: center;
        }
        .result-title-win {
            font-size: 28px;
            font-weight: bold;
            color: #ff4d4f;
            margin-bottom: 20px;
        }
        .result-title-lose {
            font-size: 28px;
            font-weight: bold;
            color: #666;
            margin-bottom: 20px;
        }
        .result-info {
            font-size: 16px;
            color: #333;
            margin-bottom: 10px;
            line-height: 1.6;
        }
        .btn-restart {
            width: 100%;
            height: 45px;
            background-color: #1677ff;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 17px;
            font-weight: 500;
            margin-top: 20px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- é€šå…³/ç ´äº§ç»“æœç•Œé¢ -->
        <div class="result-mask" id="resultMask">
            <div class="result-card">
                <div class="result-title-win" id="resultTitle">æ­å–œé€šå…³ï¼</div>
                <div class="result-info" id="resultDesc">å·²è¾¾æˆ500ä¸‡é€šå…³ç›®æ ‡</div>
                <div class="result-info" id="resultMonth">é€šå…³ç”¨æ—¶ï¼šXä¸ªæœˆ</div>
                <div class="result-info" id="resultAsset">æœ€ç»ˆæ€»èµ„äº§ï¼šÂ¥XXX</div>
                <div class="result-info" id="resultRate">æ€»æ”¶ç›Šç‡ï¼šXXX%</div>
                <button class="btn-restart" onclick="restartGame()">é‡æ–°å¼€å§‹æ¸¸æˆ</button>
            </div>
        </div>

        <div class="status-bar">
            <div class="status-left">
                <div>ç¬¬ <span id="current-month">1</span> ä¸ªæœˆ</div>
                <div>æ€»èµ„äº§ï¼šÂ¥<span id="total-assets">20,000</span></div>
            </div>
            <div class="status-right">
                <div>ç°é‡‘ï¼šÂ¥<span id="cash">20,000</span></div>
            </div>
        </div>

        <!-- é€šå…³ç›®æ ‡æç¤º -->
        <div class="target-tip">ğŸ¯ é€šå…³ç›®æ ‡ï¼šæ€»èµ„äº§è¾¾åˆ°500ä¸‡å…ƒ</div>

        <!-- å¤§äº‹ä»¶æç¤ºæ¡ -->
        <div class="event-tip" id="eventTip"></div>

        <div class="tabs">
            <div class="tab active" onclick="switchTab('shop')">å•†åº—</div>
            <div class="tab" onclick="switchTab('warehouse')">æˆ‘çš„ä»“åº“</div>
        </div>

        <div class="content">
            <div id="shop-content" class="shop-content">
                <div class="goods-list" id="goods-list"></div>
            </div>
            <div id="warehouse-content" class="warehouse-content">
                <div id="warehouse-list">ä»“åº“æ˜¯ç©ºçš„</div>
            </div>
        </div>

        <button class="btn-next-month" id="nextMonthBtn" onclick="nextMonth()">è¿›å…¥ä¸‹ä¸ªæœˆ âœ</button>
    </div>

    <script>
        // æ¸¸æˆæ ¸å¿ƒé…ç½®
        const INIT_CASH = 20000; // åˆå§‹èµ„é‡‘2ä¸‡
        const WIN_TARGET = 5000000; // é€šå…³ç›®æ ‡ï¼š500ä¸‡
        let month = 1;
        let cash = INIT_CASH;
        let isGameEnd = false; // æ¸¸æˆæ˜¯å¦ç»“æŸï¼ˆé€šå…³/ç ´äº§ï¼‰
        // ä»“åº“æ•°æ®ç»“æ„ï¼šå­˜å‚¨æ•°é‡+åŠ æƒå¹³å‡æˆæœ¬ä»·
        let warehouse = {};

        // å•†å“é…ç½®ï¼šbasePriceä¸ºç¬¬1ä¸ªæœˆåŸä»·ï¼Œæ°¸ä¹…å›ºå®šä¸ºæ¶¨è·Œå¹…è®¡ç®—åŸºå‡†
        const goods = [
            { name: "æ™ºèƒ½æ‰‹æœº", type: "æ•°ç ", basePrice: 6999, currentPrice: 6999, totalChange: 0.0, icon: "ğŸ“±" },
            { name: "æ¸¸æˆç”µè„‘", type: "æ•°ç ", basePrice: 8999, currentPrice: 8999, totalChange: 0.0, icon: "ğŸ’»" },
            { name: "å®¶ç”¨è½¿è½¦", type: "æ±½è½¦", basePrice: 78000, currentPrice: 78000, totalChange: 0.0, icon: "ğŸš—" },
            { name: "è€åŸåŒºæˆ¿äº§", type: "æˆ¿äº§", basePrice: 280000, currentPrice: 280000, totalChange: 0.0, icon: "ğŸ " },
            { name: "é»„é‡‘åŠå ", type: "è´µé‡‘å±", basePrice: 3500, currentPrice: 3500, totalChange: 0.0, icon: "ğŸ’" }
        ];

        // çªå‘äº‹ä»¶é…ç½®
        const events = [
            { desc: "èŠ¯ç‰‡æåº¦ç¼ºè´§ï¼æ•°ç å¤§æ¶¨", type: "æ•°ç ", effect: 80 },
            { desc: "ç§‘æŠ€æ³¡æ²«ç ´è£‚ï¼æ•°ç å¤§è·Œ", type: "æ•°ç ", effect: -50 },
            { desc: "æ²¹ä»·é£™å‡ï¼æ±½è½¦æ¶¨ä»·", type: "æ±½è½¦", effect: 40 },
            { desc: "æ–°èƒ½æºè¡¥è´´ï¼æ±½è½¦é™ä»·", type: "æ±½è½¦", effect: -30 },
            { desc: "æ—§åŸæ”¹é€ ï¼æˆ¿ä»·æš´æ¶¨", type: "æˆ¿äº§", effect: 100 },
            { desc: "æ¥¼å¸‚è°ƒæ§ï¼æˆ¿ä»·ä¸‹è·Œ", type: "æˆ¿äº§", effect: -40 },
            { desc: "é»„é‡‘æš´æ¶¨ï¼é¿é™©æƒ…ç»ªæ‹‰æ»¡", type: "è´µé‡‘å±", effect: 70 },
            { desc: "é»„é‡‘æŠ›å”®æ½®ï¼å¤§è·Œ", type: "è´µé‡‘å±", effect: -40 }
        ];

        // æ ¼å¼åŒ–æ•°å­—ä¸ºåƒåˆ†ä½æ•´æ•°
        function formatNumber(num) {
            return Math.round(num).toLocaleString('en-US');
        }

        // æ£€æŸ¥æ¸¸æˆæ˜¯å¦é€šå…³/ç ´äº§ï¼ˆè¾¾åˆ°/æœªè¾¾åˆ°ç›®æ ‡ï¼‰
        function checkGameStatus() {
            // è®¡ç®—æ€»èµ„äº§ï¼šç°é‡‘ + ä»“åº“å•†å“å½“å‰å¸‚å€¼
            let totalAssets = cash;
            Object.keys(warehouse).forEach(name => {
                const good = goods.find(g => g.name === name);
                totalAssets += good.currentPrice * warehouse[name].quantity;
            });

            // åªæœ‰å½“ç°é‡‘ï¼ˆå·²å–æ‰æ‰€æœ‰å•†å“åçš„èµ„äº§ï¼‰è¾¾åˆ°ç›®æ ‡æ‰ç®—é€šå…³
            if (cash >= WIN_TARGET) {
                isGameEnd = true;
                document.getElementById('resultTitle').innerText = 'ğŸ‰ æ­å–œé€šå…³ï¼';
                document.getElementById('resultTitle').className = 'result-title-win';
                document.getElementById('resultDesc').innerText = 'å·²è¾¾æˆ500ä¸‡é€šå…³ç›®æ ‡';
                document.getElementById('resultMonth').innerText = `é€šå…³ç”¨æ—¶ï¼š${month}ä¸ªæœˆ`;
                document.getElementById('resultAsset').innerText = `æœ€ç»ˆæ€»èµ„äº§ï¼šÂ¥${formatNumber(cash)}`;
                document.getElementById('resultRate').innerText = `æ€»æ”¶ç›Šç‡ï¼š${((cash - INIT_CASH)/INIT_CASH * 100).toFixed(1)}%`;
                document.getElementById('resultMask').style.display = 'flex';
                document.getElementById('nextMonthBtn').disabled = true;
                // åœæ­¢éŸ³ä¹
                musicSystem.stopMusic();
                return true;
            }

            // æœªè¾¾åˆ°ç›®æ ‡ï¼šç ´äº§æ˜¾ç¤º
            if (totalAssets <= 0) {
                isGameEnd = true;
                document.getElementById('resultTitle').innerText = 'ğŸ˜¥ æ¸¸æˆç ´äº§';
                document.getElementById('resultTitle').className = 'result-title-lose';
                document.getElementById('resultDesc').innerText = 'æœªè¾¾æˆ500ä¸‡é€šå…³ç›®æ ‡';
                document.getElementById('resultMonth').innerText = `åšæŒæ—¶é•¿ï¼š${month}ä¸ªæœˆ`;
                document.getElementById('resultAsset').innerText = `æœ€ç»ˆæ€»èµ„äº§ï¼šÂ¥${formatNumber(totalAssets)}`;
                document.getElementById('resultRate').innerText = `æ€»äºæŸï¼š${((INIT_CASH - totalAssets)/INIT_CASH * 100).toFixed(1)}%`;
                document.getElementById('resultMask').style.display = 'flex';
                document.getElementById('nextMonthBtn').disabled = true;
                // åœæ­¢éŸ³ä¹
                musicSystem.stopMusic();
                return true;
            }

            return false;
        }

        // æ¸²æŸ“å•†åº—å•†å“åˆ—è¡¨
        function renderGoodsList() {
            const listEl = document.getElementById('goods-list');
            listEl.innerHTML = '';
            goods.forEach((item, index) => {
                let changeClass = 'goods-change-zero';
                if (item.totalChange > 0) changeClass = 'goods-change-up';
                else if (item.totalChange < 0) changeClass = 'goods-change-down';
                const changeText = item.totalChange > 0 ? `+${item.totalChange.toFixed(1)}%` : `${item.totalChange.toFixed(1)}%`;
                
                const itemEl = document.createElement('div');
                itemEl.className = 'goods-item';
                itemEl.innerHTML = `
                    <div class="goods-header">
                        <div class="goods-name">${item.icon} ${item.name}</div>
                        <div class="goods-price">Â¥${formatNumber(item.currentPrice)}</div>
                    </div>
                    <div class="${changeClass}">æ¶¨è·Œå¹…ï¼š${changeText}</div>
                    <div class="goods-action">
                        <input type="number" class="goods-quantity" value="1" min="1" id="quantity-${index}">
                        <button class="btn-buy" onclick="buyGoods(${index})" ${isGameEnd ? 'disabled' : ''}>ä¹°å…¥</button>
                    </div>
                `;
                listEl.appendChild(itemEl);
            });
        }

        // æ¸²æŸ“ä»“åº“é¡µé¢ï¼ˆæˆæœ¬ä»·ã€æŒä»“ç›ˆäºï¼‰
        function renderWarehouse() {
            const listEl = document.getElementById('warehouse-list');
            const items = Object.keys(warehouse);
            if (items.length === 0) {
                listEl.innerHTML = 'ä»“åº“æ˜¯ç©ºçš„';
                return;
            }
            let html = '<div class="goods-list">';
            items.forEach(name => {
                const good = goods.find(g => g.name === name);
                const { quantity, avgCost } = warehouse[name];
                const marketValue = good.currentPrice * quantity;
                const totalCost = avgCost * quantity;
                const profit = marketValue - totalCost;
                const profitRate = (profit / totalCost) * 100;

                // æ¶¨è·Œå¹…é¢œè‰²
                let changeClass = 'goods-change-zero';
                if (good.totalChange > 0) changeClass = 'goods-change-up';
                else if (good.totalChange < 0) changeClass = 'goods-change-down';
                const changeText = good.totalChange > 0 ? `+${good.totalChange.toFixed(1)}%` : `${good.totalChange.toFixed(1)}%`;

                // ç›ˆäºé¢œè‰²
                let profitClass = 'goods-change-zero';
                if (profit > 0) profitClass = 'goods-change-up';
                else if (profit < 0) profitClass = 'goods-change-down';
                const profitText = profit > 0 ? `+Â¥${formatNumber(profit)} (+${profitRate.toFixed(1)}%)` : `Â¥${formatNumber(profit)} (${profitRate.toFixed(1)}%)`;
                
                html += `
                    <div class="goods-item">
                        <div class="goods-header">
                            <div class="goods-name">${good.icon} ${name}</div>
                            <div class="goods-price">x${quantity} | å¸‚å€¼ Â¥${formatNumber(marketValue)}</div>
                        </div>
                        <div>æˆæœ¬ä»·ï¼šÂ¥${formatNumber(avgCost)} | å½“å‰ä»·ï¼šÂ¥${formatNumber(good.currentPrice)}</div>
                        <div class="${changeClass}">å¯¹æ ‡åŸä»·æ¶¨è·Œå¹…ï¼š${changeText}</div>
                        <div class="${profitClass}">æŒä»“ç›ˆäºï¼š${profitText}</div>
                        <div class="goods-action">
                            <input type="number" class="goods-quantity" value="1" min="1" max="${quantity}" id="sell-quantity-${name}">
                            <button class="btn-buy" onclick="sellGoods('${name}')" ${isGameEnd ? 'disabled' : ''}>å–å‡º</button>
                        </div>
                    </div>
                `;
            });
            html += '</div>';
            listEl.innerHTML = html;
        }

        // æ›´æ–°é¡¶éƒ¨çŠ¶æ€æ æ•°æ®
        function updateStatus() {
            document.getElementById('current-month').textContent = month;
            document.getElementById('cash').textContent = formatNumber(cash);
            // æ€»èµ„äº§=ç°é‡‘+ä»“åº“å•†å“å½“å‰å¸‚å€¼
            let totalAssets = cash;
            Object.keys(warehouse).forEach(name => {
                const good = goods.find(g => g.name === name);
                totalAssets += good.currentPrice * warehouse[name].quantity;
            });
            document.getElementById('total-assets').textContent = formatNumber(totalAssets);
        }

        // ä¹°å…¥å•†å“ï¼ˆåŠ æƒå¹³å‡æˆæœ¬è®¡ç®—+èµ„é‡‘ä¸è¶³ä¼˜åŒ–æé†’ï¼‰
        function buyGoods(index) {
            if (isGameEnd) return;
            const good = goods[index];
            const quantityInput = document.getElementById(`quantity-${index}`);
            const quantity = parseInt(quantityInput.value);
            if (isNaN(quantity) || quantity < 1) {
                alert('è¯·è¾“å…¥æœ‰æ•ˆçš„è´­ä¹°æ•°é‡');
                return;
            }
            const buyPrice = good.currentPrice;
            const totalCost = buyPrice * quantity;

            // èµ„é‡‘ä¸è¶³æ˜ç¡®æé†’
            if (totalCost > cash) {
                alert(`ç°é‡‘ä¸è¶³ï¼\nå½“å‰å¯ç”¨ç°é‡‘ï¼šÂ¥${formatNumber(cash)}\næœ¬æ¬¡è´­ä¹°æ‰€éœ€ï¼šÂ¥${formatNumber(totalCost)}\nå·®é¢ï¼šÂ¥${formatNumber(totalCost - cash)}`);
                return;
            }

            // è®¡ç®—åŠ æƒå¹³å‡æˆæœ¬
            if (warehouse[good.name]) {
                // å·²æœ‰æŒä»“ï¼Œæ›´æ–°å¹³å‡æˆæœ¬
                const oldQuantity = warehouse[good.name].quantity;
                const oldAvgCost = warehouse[good.name].avgCost;
                const newQuantity = oldQuantity + quantity;
                const newAvgCost = Math.round((oldQuantity * oldAvgCost + totalCost) / newQuantity);
                warehouse[good.name] = { quantity: newQuantity, avgCost: newAvgCost };
            } else {
                // é¦–æ¬¡ä¹°å…¥ï¼Œç›´æ¥è®°å½•
                warehouse[good.name] = { quantity: quantity, avgCost: buyPrice };
            }

            // æ‰£å‡ç°é‡‘ï¼Œæ›´æ–°ç•Œé¢
            cash -= totalCost;
            updateStatus();
            renderWarehouse();
            checkGameStatus();
        }

        // å–å‡ºå•†å“
        function sellGoods(name) {
            if (isGameEnd) return;
            const good = goods.find(g => g.name === name);
            const { quantity: maxQuantity, avgCost } = warehouse[name];
            const quantity = parseInt(document.getElementById(`sell-quantity-${name}`).value);
            if (isNaN(quantity) || quantity < 1 || quantity > maxQuantity) {
                alert('è¯·è¾“å…¥æœ‰æ•ˆçš„å–å‡ºæ•°é‡');
                return;
            }

            const sellPrice = good.currentPrice;
            const totalRevenue = sellPrice * quantity;
            const profit = (sellPrice - avgCost) * quantity;

            // æ›´æ–°ä»“åº“æ•°é‡
            const newQuantity = maxQuantity - quantity;
            if (newQuantity === 0) {
                delete warehouse[name];
            } else {
                warehouse[name].quantity = newQuantity;
            }

            // å¢åŠ ç°é‡‘ï¼Œæ›´æ–°ç•Œé¢
            cash += totalRevenue;
            updateStatus();
            renderWarehouse();
            checkGameStatus();
        }

        // è¿›å…¥ä¸‹ä¸ªæœˆï¼ˆæ¯æœˆç‹¬ç«‹éšæœºæ¶¨è·Œå¹…ï¼Œä¸ç´¯åŠ ï¼Œè‡ªåŠ¨åˆ‡å›å•†åº—é¡µï¼‰
        function nextMonth() {
            if (isGameEnd) return;
            month++;
            const eventTipEl = document.getElementById('eventTip');
            // é‡ç½®äº‹ä»¶æç¤º
            eventTipEl.style.display = 'none';
            
            // æ ¸å¿ƒé€»è¾‘ï¼šæ¯ä¸ªæœˆç‹¬ç«‹éšæœºç”Ÿæˆå¯¹æ ‡é¦–æœˆçš„æ¶¨è·Œå¹…ï¼Œå®Œå…¨ä¸ç´¯åŠ ä¸Šä¸ªæœˆçš„æ•°å€¼
            goods.forEach(g => {
                // ç”ŸæˆÂ±20%çš„ç‹¬ç«‹éšæœºæ¶¨è·Œå¹…ï¼Œæ¯æœˆå¿…åŠ¨ï¼Œæ— å¹³ç›˜
                const monthlyRandomChange = (Math.random() * 0.4 - 0.2) * 100;
                g.totalChange = monthlyRandomChange;
            });

            // è§¦å‘çªå‘äº‹ä»¶
            const event = events[Math.floor(Math.random() * events.length)];
            // é¡µé¢å›ºå®šæç¤ºæ¡
            eventTipEl.innerText = `æœ¬æœˆäº‹ä»¶ï¼š${event.desc}`;
            eventTipEl.style.display = 'block';
            
            // å åŠ äº‹ä»¶å¹…åº¦åˆ°å½“æœˆæ¶¨è·Œå¹…
            goods.forEach(g => {
                if (g.type === event.type) {
                    g.totalChange += event.effect;
                }
                // è®¡ç®—å½“æœˆä»·æ ¼ï¼Œè‡ªåŠ¨å–æ•´æ— å°æ•°
                g.currentPrice = Math.round(g.basePrice * (1 + g.totalChange / 100));
            });

            // æ›´æ–°ç•Œé¢å¹¶è‡ªåŠ¨åˆ‡å›å•†åº—é¡µ
            renderGoodsList();
            updateStatus();
            renderWarehouse();
            checkGameStatus();
            switchTab('shop');
        }

        // åˆ‡æ¢æ ‡ç­¾é¡µ
        function switchTab(tab) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            if (tab === 'shop') {
                document.querySelectorAll('.tab')[0].classList.add('active');
                document.getElementById('shop-content').style.display = 'block';
                document.getElementById('warehouse-content').style.display = 'none';
            } else {
                document.querySelectorAll('.tab')[1].classList.add('active');
                document.getElementById('shop-content').style.display = 'none';
                document.getElementById('warehouse-content').style.display = 'block';
                renderWarehouse();
            }
        }

        // é‡æ–°å¼€å§‹æ¸¸æˆ
        function restartGame() {
            month = 1;
            cash = INIT_CASH;
            warehouse = {};
            isGameEnd = false;
            // é‡ç½®å•†å“ä»·æ ¼
            goods.forEach(g => {
                g.currentPrice = g.basePrice;
                g.totalChange = 0.0;
            });
            // é‡ç½®ç•Œé¢
            document.getElementById('resultMask').style.display = 'none';
            document.getElementById('eventTip').style.display = 'none';
            document.getElementById('nextMonthBtn').disabled = false;
            renderGoodsList();
            updateStatus();
            renderWarehouse();
            switchTab('shop');
        }

        // åˆå§‹åŒ–é¡µé¢
        renderGoodsList();
        updateStatus();
    </script>
</body>
</html>
